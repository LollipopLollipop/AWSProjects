<!DOCTYPE html><html><head xmlns:md="http://oli.web.cmu.edu/metadata/"><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta content="IE=9" http-equiv="X-UA-Compatible"><meta content="/repository/presentation/whirlwind-1.2/" name="themePath"><title>The MSB Recruitment Exam</title><base href="https://oli.cmu.edu/repository/webcontent/fda7217280020ca6017598f75d250b76/projects/_p02_project_2/_p02_m01_scenario/x-oli-workbook_page/_p02_m01_3_single_instance.xml"><link rel="StyleSheet" type="text/css" href="/repository/presentation/whirlwind-1.2/web/styles/reset.css"><link rel="StyleSheet" type="text/css" href="/repository/presentation/whirlwind-1.2/web/styles/learning_content.css"><link rel="StyleSheet" type="text/css" href="/repository/presentation/whirlwind-1.2/web/styles/azool.css"><link rel="StyleSheet" type="text/css" href="/repository/presentation/whirlwind-1.2/web/styles/style.css"><link rel="StyleSheet" type="text/css" href="/repository/presentation/whirlwind-1.2/web/styles/mBoxCore.css"><link rel="StyleSheet" type="text/css" href="/repository/presentation/whirlwind-1.2/web/styles/mBoxModal.css"><!--[if lte IE 7.0]>
        <link rel="stylesheet" href="/repository/presentation/whirlwind-1.2/web/styles/ie/ie7.css" type="text/css" />
        <![endif]-->
        <!--[if lte IE 6]>
        <link rel="stylesheet" href="/branding/css/ielte6.css" type="text/css" />
        <![endif]--><link rel="StyleSheet" type="text/css" href="/repository/presentation/whirlwind-1.2/web/workbook_page/workbook_page.css"><!--[if IE 7]><![endif]--><script src="/repository/presentation/whirlwind-1.2/web/scripts/swfobject.js" type="text/javascript"></script><script src="/repository/presentation/whirlwind-1.2/web/scripts/mootools-core-1.4.5-full-compat.js" type="text/javascript"></script><script src="/repository/presentation/whirlwind-1.2/web/scripts/mootools-more-1.4.0.1.js" type="text/javascript"></script><script src="/repository/presentation/whirlwind-1.2/web/scripts/mootests.js" type="text/javascript"></script><script src="/repository/presentation/whirlwind-1.2/web/scripts/mBox.Core.min.js" type="text/javascript"></script><script src="/repository/presentation/whirlwind-1.2/web/scripts/mBox.Modal.min.js" type="text/javascript"></script><script src="/repository/presentation/whirlwind-1.2/web/scripts/azool.js" type="text/javascript"></script><script src="/oa.js" type="text/javascript"></script><script type="text/javascript" src="/repository/presentation/whirlwind-1.2/web/workbook_page/workbook_page.js">//</script><script type="text/javascript">var AZ = AZ ? AZ : {};
AZ.d = {'courseKey': 'F14-CC-PSA', 'pageNumber': '159'};

/* <![CDATA[ */
swfobject.embedSWF('../webcontent/youplayer.swf',
 'o_i_6',
 '640',
 '480',
 '10.2',
 (Browser.Platform.mac ? null : '/repository/presentation/whirlwind-1.2/web/scripts/expressInstall.swf'),
{'movie_identifier':'_i_6', 'version':'10.2', 'expressinstall':'%2Frepository%2Fpresentation%2Fwhirlwind-1.2%2Fweb%2Fscripts%2FexpressInstall.swf', 'log_service_url':'%2Flog%2Fserver', 'user_guid':'dingz%40andrew.cmu.edu', 'session_id':'1c9670f380020ca600ba8cf7e8309e55', 'auth_token':'s%3D1c9670f380020ca600ba8cf7e8309e55%26u%3Ddingz%40andrew.cmu.edu%26h%3D1875afe0f644fa4f255efe8eb57dd363', 'container_id':'0e4f806980020ca6014b700d3642cb81', 'source_id':'FLASH_PSEUDO_TUTOR', 'dataset_name':'F14-CC-PSA', 'problem_name':'youplayer', 'school_name':'Carnegie+Mellon+University', 'class_name':'F14-CC-PSA', 'class_description':'15319%2F15619+Cloud+Computing+%28Fall+2014%29%3A+Aug+2014+-+Jan+2015', 'video_id':'Fw0aNoMZesg', 'fs':'1', 'object_height':'480', 'object_width':'640', 'br':'br',},
 {
			
			scale: 'showall', allowScriptAccess: 'always', swLiveConnect: 'true', 
			wmode: 'white'},
 {},
 false);
  /* ]]> */
</script></head><body class="workbook_page"><div class="contain"><div role="banner" class="header"><div class="oliClassTitle"><a class="logo"></a><h1><a title="15319/15619 Cloud Computing (Fall 2014)" href="/jcourse/lms/students/syllabus.do?section=0e4f7c4380020ca600aa44ba1eaf4b1e">15319/15619 Cloud Computing (Fall 2014)</a></h1></div><div aria-label="system" role="navigation" class="user"><h3>System Navigation</h3><ul class="userCredentials"><li class="userName"><a title="Edit my account" id="username" href="/jcourse/webui/myaccount/edit.do?user=dingz@andrew.cmu.edu">Ding ZHAO</a></li> <li class="login"><a title="Logout of the Open Learning Initiative." class="signout" href="/jcourse/webui/logout.do?from=0e4f806980020ca6014b700d3642cb81">
                            [  Sign Out  ]
						</a></li></ul><div class="clear"></div><ul class="userHelp"><li><a title="Access Key + C" accesskey="C" class="home" id="myCourses" href="/jcourse/webui/myhome.do">My Courses</a>|
				</li><li><a title="Access Key + S" accesskey="S" class="mimetypes_x-office-address-book" id="syllabus" href="/jcourse/lms/students/syllabus.do?section=0e4f7c4380020ca600aa44ba1eaf4b1e">Syllabus</a>|
			</li><li><span class="coursenav"> <a class="active" href="/jcourse/webui/syllabus/outline.do?section=0e4f7c4380020ca600aa44ba1eaf4b1e&from=0e4f806980020ca6014b700d3642cb81">
	      
	        
			Outline
	    </a></span>|
			</li><li><a onclick="openMdWin(this.href, 'activity');return false;" title="Ask OLI technical support team" href="/jcourse/webui/help.do">Help</a>|
			</li><li id="moreBtn2"><a aria-haspopup="true" href="" tabindex="" title="More" accesskey="M" id="moreBtn">
					More
				</a></li></ul></div><div class="shadowOne" id="wn"><span class="controlpanel"> <a target="_blank" href="/jcourse/GradebookClient/index.html?myscores&section=0e4f7c4380020ca600aa44ba1eaf4b1e&col=0e4f805d80020ca601b79285e8642616"><span class="gradebook">My Scores</span></a><a href="/jcourse/webui/mycourses/reports/practice.do?section=0e4f7c4380020ca600aa44ba1eaf4b1e&context=0e4f805d80020ca601b79285e8642616"><span class="studentDashboard">Available Practice</span></a></span><span class="supportPanel"> <a title="Check if my computer is configured properly for this course." href="/jcourse/webui/help/configure/redirect.do?section=0e4f7c4380020ca600aa44ba1eaf4b1e"><span class="categories_preferences-system">Test My System</span></a> <a title="Send email to Majd Sakr" href="mailto:msakr@ANDREW.CMU.EDU"><span class="actions_mail-message-new">Email Sakr</span></a> <a onclick="openMdWin(this.href, 'activity');return false;" class="wnTechSupport" title="Ask OLI technical support team" href="/jcourse/webui/help.do"><span class="actions_mail-message-new">Email Tech Support</span></a></span></div></div><div aria-haspopup="true" aria-label="Unit" role="navigation" class="lessonHead"><h2 tabindex="" accesskey="u" id="0e4f805b80020ca6003d5223beb6c69f"><a tabindex="" href="javascript:;"><span>Unit&nbsp;::</span>Project 2</a></h2></div><div class="expand shadowOne"><ul id="topLvl"></ul></div><div aria-label="module, page" role="navigation" class="subNavigation"><a aria-label="previous, module" role="navigation" accesskey="," class="prev oneclick" href="javascript:;"></a><a aria-label="next, module" role="navigation" accesskey="." class="next oneclick" href="javascript:;"></a><div class="module"><ul id="moduleUl"><li class="current"><a id="0e4f805d80020ca601b79285e8642616" title="Module  Introduction and APIs" rel="" href="/jcourse/webui/syllabus/module.do?context=0e4f805d80020ca601b79285e8642616"><b><span>Introduction and APIs</span></b></a></li><li><a id="0e4f806c80020ca6018cb1867646cfa9" title="Module  Elastic Load Balancing" rel="" href="/jcourse/webui/syllabus/module.do?context=0e4f806c80020ca6018cb1867646cfa9"><b><span>Elastic Load Balancing</span></b></a></li><li><a id="0e4f807580020ca601ef5d1cc06eb368" title="Module  AutoScaling on Amazon" rel="" href="/jcourse/webui/syllabus/module.do?context=0e4f807580020ca601ef5d1cc06eb368"><b><span>AutoScaling on Amazon</span></b></a></li></ul></div><div class="subMenu shadowOne" id="subMenuExpand"><ul id="jsonSubMenu"></ul></div></div><div class="searchBox"><form method="get" action="/jcourse/search/search.do" id="searchForm"><input value="0e4f7c4380020ca600aa44ba1eaf4b1e" type="hidden" name="section" class="sectionGUID"><input placeholder="Search this course" onBlur="this.setAttribute('value', this.value);" value="" size="25" id="q" type="text" name="q" class="q"><input value="0e4f806980020ca6014b700d3642cb81" type="hidden" name="from" class="contextGUID"></form></div><div class="opacity"><div role="main" class="content shadowTwo"><div id="oli-message"><!----></div><div id="paginationtopwrap"><div class="clearfix" id="paginationtop"><div class="pagtopwrapwrap"><div class="pagtopwrap"><div aria-label="page" role="navigation" class="pagtop"><a aria-label="previous" role="navigation" title="Introduction" class="prev oneclick degree2" accesskey="Ctrl+Arrow Left" href="/jcourse/workbook/activity/page?context=0e4f805f80020ca600364b9a1b07dd98"></a> <a aria-label="previous" role="navigation" title="Amazon Web Service APIs" class="prev oneclick degree1" accesskey="Ctrl+Arrow Left" href="/jcourse/workbook/activity/page?context=0e4f806780020ca601c7e3edb7fe9c99"></a> <span class="pagnum"><form method="get" class="pageForm" style="" action="/jcourse/webui/syllabus/page.do?section=0e4f7c4380020ca600aa44ba1eaf4b1e"><label for="pagenumnewinput"><span style="display:none" class="pageTip" id="pagnumtip">Enter Page 1-185, then press Enter</span></label><input value="185" type="hidden" class="pageMax"><input size="4" autocomplete="off" value="159" type="text" class="paginationInput"> </form></span><a aria-label="next" role="navigation" title="Next: Elastic Load Balancing" accesskey="Ctrl+Arrow Right" class="next oneclick degree1" href="/jcourse/webui/syllabus/module.do?context=0e4f806c80020ca6018cb1867646cfa9"></a></div></div></div><h3><a href="/jcourse/webui/syllabus/module.do?context=0e4f805d80020ca601b79285e8642616" class="module-heading"></a>The MSB Recruitment Exam</h3></div></div><div id="lobjh" class=""><h3>Learning Objectives</h3><ul><li><div class="" id="p02_m01_single">Benchmark a single instance's performance</div></li></ul></div><div class="contentContain">
		<div id="N106F1" class="section"><div class="sectionContain ">
			<h2>Getting Ready</h2>
			
				<p>The MSB recruitment exam requires you to write code to build a system that 
				is capable of handling the large volume of data generated 
				by the Load Generator.</p>
				
 				<p><em class="bold">Note</em>: For this checkpoint, assign the tag with Key: <code>Project</code> and Value: <code>2.1</code> for all resources</p>
					
					<p>Using the Amazon EC2 API, please write code that does the following:
</p>

				<ol><li>Launches an <code>m3.medium</code> load generator (ami-1810b270) with the correct tag 
					</li><li>Launches an <code>m3.medium</code> data center instance (ami-324ae85a) with the correct tag
					</li><li>Please note that the instance tagging for steps 1 and 2 above must be done in your code, 
					and not manually through the AWS web console.</li><li>Activate your instances by providing your username at the URLs:
						<ul><li><code>http://&lt;your-load-generator-instance-dns-name&gt;/username/</code></li><li><code>http://&lt;your-data-center-instance-dns-name&gt;/username/</code></li></ul>
					</li><li><p>Submit the data center instance&rsquo;s DNS name to:</p>
					<p>
						<code>http://&lt;your-load-generator-instance-dns-name&gt;/part/one/i/want/more/</code></p>
						<p>To submit using code, you can request a URL like:
<code>http://&lt;your-load-generator-instance-dns-name&gt;/part/one/i/want/more?dns=ec2-54-165-107-16.compute.amazonaws.com&amp;testId=Pizza</code>
						</p></li></ol>
					<div class="image shouldbeleft"><img src="../webcontent/msb_screenshot7.png" id="_i_0" class=" popimg" onclick="loadImageFromPage(this);"></div>
					
				<p>At this point, the load generator will start firing a massive amount of traffic to your instance. Unfortunately, a single <code>m3.medium</code> instance is incapable of handling this traffic. Every minute, you should see the updated performance (average requests per second) score at the URL:
				<code>http://your-load-generator-instance-dns-name/view-logs?name=
				result_&lt;yourusername&gt;_&lt;testid&gt;.txt.
				</code></p>	
					
					<div class="image shouldbeleft"><img src="../webcontent/msb_screenshot8.png" id="_i_1" class=" popimg" onclick="loadImageFromPage(this);"></div>
					
				<p>This page is updated every 60 seconds with the latest performance score.
				</p>
				
				<p>To pass the final exam, your code should quickly scale up the
	number of instances in the data center. To do this, your code should
	perform Steps 2-5 (above), compute the cumulative average rps of all connected instances.
</p>
				
				<p>Your goal is for all instances in the data center to handle an aggregate of 3600 requests per second.
				</p>
				
				<p>During the test, you may find it interesting to monitor the instance graphs on the EC2 Console.</p>
				
									<div class="image shouldbeleft"><img src="../webcontent/msb_screenshot9.png" id="_i_2" class=" popimg" onclick="loadImageFromPage(this);"></div>
				<p>To complete the test, you have a maximum of 40 minutes to scale up to the required number of instances. Your grade will be based on how quickly you meet the target.
				</p>
				
				<p>At the end of the test, you should see something like:
				</p>
				
				<div class="image shouldbeleft"><img src="../webcontent/msb_screenshot10.png" id="_i_3" class=" popimg" onclick="loadImageFromPage(this);"></div>
				
				<p>Your code should note down these two lines and you should manually submit these values in the checkpoint, at the correct places. 
				</p>
				
				<div id="N10766" class="section"><div class="sectionContain "><h3>Testing Rules</h3>
				
				<ol><li>Please make sure you start with a blank slate. All your instances must be launched by your code. All data center instances (except for the first one) should be launched after the test starts.
					</li><li>All instances must be tagged. Try to use spot pricing but be aware of the consequences.
					</li><li>Make sure your code parses the current requests per second and then decides whether to launch another instance. 
					<ul><li>Do not hardcode the number of instances into the code.</li><li>Your code should launch a single instance at a time.</li><li>Do not launch multiple data center instances simultaneously (the MSB instructors will check if any pair of data center instances have a launch time within 2 minutes of each other).</li></ul> 
					</li><li>There is no way to stop a running test (apart from rebooting your instances). Please proceed with caution. Only run the test once you are sure you understand all the different pieces involved.
					</li><li>Your code should not terminate the instances at the end of the test, we will have one more task after this.</li><li>Besides the penalties mentioned in recitation and/or on Piazza, penalties accrue for the following:
					<table cellspacing="0" class="wbtable " align="center"><thead><tr><th>Violation</th><th align="left">Penalty of the project grade</th></tr></thead><tbody><tr>
			<td align="left">Provisioning too many instances to complete this task</td>
			<td>-10%</td>
		</tr><tr class="e">
			<td align="left">Provisioning more than one instance within a 2 minute period</td>
			<td>-10%</td>
		</tr><tr>
			<td align="left">Spending more than $5 for this project checkpoint</td>
			<td>-10%</td>
		</tr><tr class="e">
			<td>Failing to tag all your instances for this project</td>
			<td>-10%</td>
		</tr><tr>
			<td>Submitting your AWS credentials in your code on S3 for grading</td>
			<td>-10%</td>
		</tr></tbody></table>
						
					</li></ol>
				
				</div></div>
				
				<div id="N107CA" class="section"><div class="sectionContain ">
				<h3>Suggestions:</h3>
				
				<ol><li>Try a dry run without code (using only the browser), if you want to get a feel for the process
					</li><li>If you are unfamiliar with how to submit an HTML Form using code, view the process on your browser.
					</li><li>Launching all instances within the same subnet should yield a better performance than having them in different subnets.
					</li></ol>
				
				</div></div>
				
				<p><em class="bold">Note</em>: Do not terminate your instances yet.</p>
				
				<p>At this point, you should look back and understand the
					limitations of this method:
				</p>
				
					<p>You have a load generator, and several data center instances trying
						to ingest data from it. Everytime we add an instance, we need to
						inform the load generator, which must perform some computations to
						begin to distribute the traffic evenly amongst the Data Center VMs.
						Here, the load generator distributes the traffic equally amongst all
						target hosts. However, what would happen if you wanted to scale down?
						Or if an instance failed? How would you even monitor if an instance
						failed?
					</p>
					
				<p>To be able to address these shortcomings (and for many other benefits), Amazon 
				has a service known as Elastic Load Balancing that automatically
					divides traffic to connected instances. As with any new technology, there 
					are trade-offs, some of which we hope to introduce you to in the coming modules.
				</p>
				
					
		</div></div>
					
				<div id="N107F0" class="section"><div class="sectionContain ">
			<h2>Elastic Load Balancer</h2>
			
				<p>The
				<a href="http://aws.amazon.com/elasticloadbalancing/" id="_i_4" target="_blank">Elastic Load Balancer</a>
				acts as a network router that will send
				incoming requests to multiple
				EC2 Instances sitting behind it in a
				round-robin fashion. Round-robin scheduling is
        not perfect, but it can do an adequate job given a large number of
        users, each with relatively simple requests. The Instances
				it points to can be added manually
				through the web console,
				programmatically through an API, or
				dynamically with Auto Scaling Group.
				It also does a Health Check to see
				if the host is alive (if not, it will
				stop sending requests to it).
				Using an ELB costs $0.025 per hour +
				$0.008 per GB transferred through
				it.</p>

				<div class="image shouldbeleft"><img src="../webcontent/ELB_network_diagram.png" id="_i_5" class=" popimg" onclick="loadImageFromPage(this);"></div>
				
				<p>The following video covers the basics of ELB:</p>
				
				<div class="activitywrap  flash"><div class="activityhead"><!----><div class="activityinfo"><!----></div></div><div class="actContain"><div class="activity flash"><div style="min-width:640px;min-height:480px;" class="flash_obj" id="_i_6"><div id="o_i_6"><div style="width:640px;height:125px;" class="noflash"><div class="code"><p>Adobe Flash Player is required.</p><p><a target="_blank" href="http://get.adobe.com/flashplayer/">Get
									Adobe<sup>&reg;</sup> Flash<sup>&reg;</sup> Player.</a></p><p><a target="_blank" href="/jcourse/webui/help/configure/redirect.do?section=0e4f7c4380020ca600aa44ba1eaf4b1e">Test My System</a></p></div></div></div></div> </div></div><div class="captionwrap"><span class="caption">Elastic Load Balancing</span></div></div>
				
		
		</div></div>
		
		<div id="N1081B" class="section"><div class="sectionContain ">
		<h2>Last Step</h2>
		
		<p>Please register all running data center instances (not the load
	generator) with the Elastic Load Balancer. Use the ELB Console on the
	Amazon website. We do not expect you to complete this task 
	programmatically using the APIs.
</p>
		
		<div class="image shouldbeleft"><img src="../webcontent/elb_screenshot_1.png" id="_i_7" class=" popimg" onclick="loadImageFromPage(this);"></div>
		
		<p>For the health-check, you should use the /heartbeat page. Do not use a different page for the heartbeat, as we are running validation code on this page to test if you really used it.
		</p>
		
		<div class="image shouldbeleft"><img src="../webcontent/elb_screenshot_2.png" id="_i_8" class=" popimg" onclick="loadImageFromPage(this);"></div>
		
		<p>Wait for the instances to be &ldquo;in-service&rdquo;:
		</p>
		
		<div class="image shouldbeleft"><img src="../webcontent/elb_screenshot_3.png" id="_i_9" class=" popimg" onclick="loadImageFromPage(this);"></div>
		
		<p>Then visit the URL:<code>http://&lt;your-load-generator-instance-dns-name&gt;/part/one/elb/
		</code></p>
		
		<p>Observe the minute-wise logs and monitor the utilization on the EC2 as well as ELB console. Once again, this is at:
		<code>http://&lt;your-load-generator-instance-dns-name&gt;/view-logs?name=result_&lt;yourusername&gt;_&lt;testID&gt;.txt.</code></p>
		
		<p>How did performance using the ELB compare with the earlier performance? Why do you think that is?</p>
		
		<p>Now you are ready to attempt the written exam. Please proceed to the checkpoint.
		</p>
		
		</div></div>
		
		
				<div class="activitywrap purpose checkpoint wbactivity"><div class="activityhead"><!----><a id="_p02_m01_checkpoint_1" class="purposeType purposecheckpoint" title="   Assess    your progress." href="/jcourse/webui/resolver/link/resource.do?src=0e4f806980020ca6014b700d3642cb81&dst=_p02_m01_checkpoint_1" target="_blank"><span class="scnReader">Checkpoint</span></a><div class="activityinfo"><!----></div></div><div class="actContain"><h3><a href="/jcourse/webui/resolver/link/resource.do?src=0e4f806980020ca6014b700d3642cb81&dst=_p02_m01_checkpoint_1" title="Opens in new window" class="checkpoint" target="_blank">MSB Recruitment Exam</a></h3></div></div> 

		

	</div></div></div><div class="paginationBt"><div class="pagtopwrapwrap2"><div class="pagtopwrap2"><div aria-label="page" role="navigation" class="pagtop2"><a aria-label="previous" role="navigation" title="Introduction" class="prev oneclick degree2" accesskey="Ctrl+Arrow Left" href="/jcourse/workbook/activity/page?context=0e4f805f80020ca600364b9a1b07dd98"></a> <a aria-label="previous" role="navigation" title="Amazon Web Service APIs" class="prev oneclick degree1" accesskey="Ctrl+Arrow Left" href="/jcourse/workbook/activity/page?context=0e4f806780020ca601c7e3edb7fe9c99"></a> <span class="pagnum2"><form method="get" class="pageForm2" action="/jcourse/webui/syllabus/page.do?section=0e4f7c4380020ca600aa44ba1eaf4b1e"><label for="pagenumnewinput"><span style="display:none" class="pageTip2">Enter Page 1-185, then press Enter</span></label><input value="185" type="hidden" class="pageMax2"><input size="1" autocomplete="off" value="159" type="text" class="paginationInput2"> </form></span><a aria-label="next" role="navigation" title="Next: Elastic Load Balancing" accesskey="Ctrl+Arrow Right" class="next oneclick degree1" href="/jcourse/webui/syllabus/module.do?context=0e4f806c80020ca6018cb1867646cfa9"></a></div></div></div></div><div role="contentinfo" id="tinyfooter"><a class="oli" href="/">Open Learning Initiative</a><br><span class="license" title="Creative Commons License"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="https://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" style="border-width:0" alt="Creative Commons License"></a> Unless otherwise noted this work is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.
			</span></div></div></body></html>